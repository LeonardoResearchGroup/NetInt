package executable;

import java.util.ArrayList;

import graphElements.Edge;
import graphElements.Graph;
import graphElements.Node;
import utilities.visualArrangements.Container;
import visualElements.VCommunity;
import processing.core.*;

public class Logica {
	ArrayList<Edge> edges;
	ArrayList<Node> vertices;
	Graph rootGraph;
	Container vNetA, vNetB;
	VCommunity community;
	int nA = 1000;
	int nB = 1200;

	public Logica(PApplet app) {
		vertices = new ArrayList<Node>();
		edges = new ArrayList<Edge>();

		// create nodes
		for (int i = 0; i < nA; i++) {
			Node tmpA = new Node(i);
			vertices.add(tmpA);
		}

		// create edges
		edges = randomEdgeFactory(vertices);

		// Making the graph
		rootGraph = new Graph(vertices, edges);

		// Set Degree
		rootGraph.setDegree();

		// Container of visual graph the graph
		vNetA = new Container(app, rootGraph);

		// instantiating & visualizing community
		community = new VCommunity(app, vNetA, app.width / 2, 150, 100);

	}

	// Factories
	private ArrayList<Edge> randomEdgeFactory(ArrayList<Node> nodes) {
		ArrayList<Edge> rtn = new ArrayList<Edge>();
		for (int i = 0; i < nodes.size(); i++) {
			int src = (int) (Math.random() * nodes.size());
			int trg = (int) (Math.random() * nodes.size());
			Edge tmp = new Edge(nodes.get(src), nodes.get(trg), true);
			rtn.add(tmp);
		}
		return rtn;
	}

	public void show(PApplet app) {
		communityA.show();
		communityB.show();
	}
}
