package executable;

import java.awt.Dimension;
import java.util.ArrayList;

import edu.uci.ics.jung.graph.DirectedSparseMultigraph;
import graphElements.Edge;
import graphElements.Node;
import utilities.visualArrangements.Container;
import utilities.visualArrangements.RootContainer;
import utilities.visualArrangements.SubContainer;
import visualElements.VCommunity;
import processing.core.*;

public class Logica {
	// Interaction elements
	public PVector mousePos;

	// Graph Elements
	private GraphLoader rootGraph;
	private ArrayList<DirectedSparseMultigraph<Node, Edge>> subGraphs;

	// Visual Elements
	private ArrayList<SubContainer> containers;
	//private RootContainer mainCommunity;
	//private SubContainer subCommunityAsia,subCommunityEuropa;
	private VCommunity vMainCommunity, vAsia, vEuropa;
	

	public Logica(PApplet app) {
		// ***** GRAPHS and SUBGRAPHS*****
		// Root
		String XML_FILE = "../data/graphs/Risk.graphml";
		rootGraph = new GraphLoader(XML_FILE);
		// SubCommunities
		subGraphs = new ArrayList<DirectedSparseMultigraph<Node, Edge>>();
		for(String communityName : rootGraph.getCommunityNames()){
			subGraphs.add(GraphLoader.filterByCommunity(rootGraph.jungGraph,communityName));
		}
		//DirectedSparseMultigraph<Node, Edge> asia = GraphLoader.filterByCommunity(rootGraph.jungGraph, "AS");
		//DirectedSparseMultigraph<Node, Edge> europa = GraphLoader.filterByCommunity(rootGraph.jungGraph, "EU");

		// ***** CONTAINERS *****
		//Container of rootGraph
		containers = new ArrayList<SubContainer>();
		RootContainer mainCommunity = new RootContainer(app, rootGraph.jungGraph, RootContainer.CIRCULAR, new Dimension(250, 250));
		mainCommunity.setName("World");
		for(SubContainer c: containers){
			
		}
		SubContainer subCommunityAsia = new SubContainer(asia,mainCommunity,Container.FRUCHTERMAN_REINGOLD,new Dimension(180, 180));
		subCommunityAsia.setName("Asia");
		containers.add(subCommunityAsia);
		SubContainer subCommunityEuropa = new SubContainer(europa,mainCommunity,Container.SPRING,new Dimension(150, 150));
		subCommunityEuropa.setName("Europa");

		// ***** VISUALIZERS *****
		// Main Community
		vMainCommunity = new VCommunity(app, new Node(0), mainCommunity);
		// SubCommunities
		vAsia = new VCommunity(app, new Node(0), subCommunityAsia);
		vEuropa = new VCommunity(app, new Node(0), subCommunityEuropa);
		
	}

	public void show(PApplet app) {
		
		vMainCommunity.show();
		vAsia.show();
		vEuropa.show();
	}
}
